{% extends 'base.html' %}

{% block title %}Population cluster for electrification in Nigeria{% endblock %}

 {% block head %}

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" integrity="sha384-X7L1bhgb36bF1iFvaqvhgpaGpayKM+vXNNYRlF89BFA5s3vi1qZ8EX9086RlZjy1" crossorigin="" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" integrity="sha384-lPzjPsFQL6te2x+VxmV6q1DpRxpRk0tmnl2cpwAO5y04ESyc752tnEWPKDfl1olr" crossorigin="" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" integrity="sha384-5kMSQJ6S4Qj5i09mtMNrWpSi8iXw230pKU76xTmrpezGnNJQzj0NzXjQLLg+jE7k" crossorigin="" />
	<!-- Compressed CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/maps.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/foundation.min.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/nouislider.min.css') }}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
        <script type=text/javascript>
           $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        </script>

{% endblock %}

{% block header %}{% endblock %}

{% block content %}
<div id="map-content" class="grid-x">

  <div id="sidebar" class="cell medium-10 large-3 left grid-container full">
	<div class="grid-x sidebar-levels">
	  <div id="national" class="cell small-6 level sidebar__btn active">
			<button onclick="national_button_fun()">National level</button>
	  </div>
	  <div id="state" class="cell small-6 level sidebar__btn">
			<button onclick="">State level</button>
	  </div>
	  <div id="village" class="cell level sidebar__btn">
			<button onclick="village_button_fun()">Village level</button>
	  </div>

        <a style="display: none" id="export_csv" href="#"></a>


	</div>
	
	<div class="grid-x align-center sidebar-dropdown">
      <div class="cell sidebar__btn active small-8 n_show s_show v_hide" data-toggle="state-dropdown">
		<select id="stateSelect" class="dropdown-button" onchange="state_dropdown_fun();">
            <option value="init" disabled selected>Select a state</option>
            <option value="Abia">Abia</option>
            <option value="Adamawa">Adamawa</option>
            <option value="Akwa Ibom">Akwa Ibom</option>
            <option value="Anambra">Anambra</option>
            <option value="Bauchi">Bauchi</option>
            <option value="Bayelsa">Bayelsa</option>
            <option value="Benue">Benue</option>
            <option value="Borno">Borno</option>
            <option value="Cross River">Cross River</option>
            <option value="Delta">Delta</option>
            <option value="Ebonyi">Ebonyi</option>
            <option value="Edo">Edo</option>
            <option value="Ekiti">Ekiti</option>
            <option value="Enugu">Enugu</option>
            <option value="Federal Capital Territory">Federal Capital Territory</option>
            <option value="Gombe">Gombe</option>
            <option value="Imo">Imo</option>
            <option value="Jigawa">Jigawa</option>
            <option value="Kaduna">Kaduna</option>
            <option value="Kano">Kano</option>
            <option value="Katsina">Katsina</option>
            <option value="Kebbi">Kebbi</option>
            <option value="Kogi">Kogi</option>
            <option value="Kwara">Kwara</option>
            <option value="Lagos">Lagos</option>
            <option value="Nasarawa">Nasarawa</option>
            <option value="Niger">Niger</option>
            <option value="Ogun">Ogun</option>
            <option value="Ondo">Ondo</option>
            <option value="Osun">Osun</option>
            <option value="Oyo">Oyo</option>
            <option value="Plateau">Plateau</option>
            <option value="Rivers">Rivers</option>
            <option value="Sokoto">Sokoto</option>
            <option value="Taraba">Taraba</option>
            <option value="Yobe">Yobe</option>
            <option value="Zamfara">Zamfara</option>
		</select>
      </div>
	</div>

    {% import "sidebar_checkbox.html" as checkbox %}

    {{ checkbox.input(id="states", label="States (availability)", visible=[]) }}
    {{ checkbox.input(id="buildingDensity", label="Buildings", visible=[]) }}

    {{ checkbox.input(id="nationalGrid", label="Medium Voltage Grid", visible=['national']) }}

    {{ checkbox.input(id="heatmap", label="Populated Areas", visible=['national']) }}

    {{ checkbox.input(id="ogClusters", label="Mapped off-grid clusters", visible=['state', 'village'], filter_func=True) }}

    <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="ogClustersContent">
          <div class="sidebar-panel-item">
            <p href="#" class="sidebar-panel-item-title">Area</p>
              <div class="filter">
                <div class="filter__slider" id="ogAreaSlider"></div>
                <div class="filter__i">
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="ogClustersContent">
          <div class="sidebar-panel-item">
            <p href="#" class="sidebar-panel-item-title">Distance to Grid</p>
            <div class="filter">
              <div class="filter__slider" id="ogDistanceSlider"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

      <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="ogClustersContent">
          <div class="sidebar-panel-item">
             <div id="download_ogClusters" class="sidebar__btn">
        <button onclick="download_clusters_fun()">Download selected clusters</button>

      </div>
          </div>
        </div>
      </div>
    </div>



    {{ checkbox.input(id="clusters", label="Population Clusters", visible=['state', 'village'], filter_func=True) }}

    <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="clustersContent">
          <div class="sidebar-panel-item">
            <p href="#" class="sidebar-panel-item-title">Area</p>
              <div class="filter">
                <div class="filter__slider" id="areaSlider"></div>
                <div class="filter__i">
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="clustersContent">
          <div class="sidebar-panel-item">
            <p href="#" class="sidebar-panel-item-title">Distance to Grid</p>
            <div class="filter">
              <div class="filter__slider" id="dtgSlider"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

           <div class="grid-x">
      <div class="cell n_hide s_show v_show">
        <div class="sidebar-panel sidebar-panel-content content-filter hidden-filter" name="clustersContent">
          <div class="sidebar-panel-item">
             <div id="download_clusters" class="sidebar__btn">
        <button onclick="download_clusters_fun()">Download selected clusters</button>

      </div>
          </div>
        </div>
      </div>
    </div>

    {{ checkbox.input(id="grid", label="Grid", visible=['state', 'village']) }}

    {{ checkbox.input(id="infrastructure", label="Infrastructure", visible=['village']) }}



  </div>

  <div id="map" class="cell medium-10 large-9"></div>

  <script src="{{ url_for('static', filename='js/jquery-3.4.1.min.js') }}"></script>
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster-src.js" integrity="sha384-NAOEbWFcjnXc7U9GkULPhupHZNAbqru9dS3c+4ANYAwtFoVAWuVuMVDH0DIy4ESp" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.vectorgrid@1.3.0/dist/Leaflet.VectorGrid.bundled.js" integrity="sha384-FON5fTjCTtPuBgUS1r2H/PGXstH0Rk23YKjZmB6qITkbFqBcqtey/rPo9eXwOWpx" crossorigin=""></script>

  <!-- <script src="static/data/points.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet-sidebar-v2@3.0.2/js/leaflet-sidebar.min.js" integrity="sha384-LzTQ6yhqVy/ipjMq5MMk98mo0E64Wtu9K1Jm5OeKPolnqrlv3FMdc457RoOANGMb" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/wnumb/1.1.0/wNumb.min.js" integrity="sha384-9NhfMwMkkA6dDFEyj5CxOiYaL6KqLjKINTJkR7e5SlZthrndR9oB/SJsi5PBNnjw" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/11.0.3/nouislider.min.js" integrity="sha384-sxnhs+25aQQN+rABTQEEYOIX5CW20SBJyXt9oGMT5VDacFTTWGXKotTEAe8BUiwb" crossorigin=""></script>



  <!-- local scripts -->
  <script src="{{ url_for('static', filename='js/nigeria_osm_states_simplified.js') }}"></script>
  <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
  <script src="{{ url_for('static', filename='js/layerstyles.js') }}"></script>
  <script src="{{ url_for('static', filename='js/layers.js') }}"></script>
  <script src="{{ url_for('static', filename='js/foundation.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/map.js') }}"></script>

      <script type=text/javascript>
        var stateCheckBox = document.getElementById("statesCheckbox")
        {% if states_content is defined %}
            var states_content = {{ states_content|safe }};
        {% else %}
            var states_content=false;
        {% endif %}
        if (states_content != stateCheckBox.checked){
            stateCheckBox.click()
        }

        var gCheckBox = document.getElementById("gridCheckbox")
        {% if grid_content is defined %}
            var grid_content = {{ grid_content|safe }};
        {% else %}
            var grid_content=false;
        {% endif %}

        if (grid_content != gCheckBox.checked){
            gCheckBox.click()
        }

    </script>
  </div>
{% endblock %}
